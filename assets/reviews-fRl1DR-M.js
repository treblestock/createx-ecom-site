import{R as x}from"./Rating-kAAtyI2H.js";import{d as f,B as b,g as l,h as w,F as k,z as I,b as t,o as p,e as n,l as P,t as m,a as v,C as y,_ as g,L as S,p as R,m as $,O as F,Q as V,r as C,w as B,Y as D,D as M,n as T,y as L,A as N,c as O}from"./index-pDbPBkRX.js";import{I as q}from"./star-fchBd0MO.js";import{P as z}from"./ProductCard-rEKk1pP-.js";import{P as H}from"./ProductReview-Kr61ARL4.js";import"./ColorInput-q_nIjie1.js";import"./strings-Htb0e1Do.js";import"./share-arrow-Ab5I9jAc.js";import"./date-mHTQdQ3H.js";const U={class:"ratin-chart"},A={class:"mark"},E={class:"count"},Q=f({__name:"RatingChart",props:{1:{},2:{},3:{},4:{},5:{}},setup(o){b(c=>({d06d57f8:t(a)[5],d06d5836:t(a)[4],d06d5874:t(a)[3],d06d58b2:t(a)[2],d06d58f0:t(a)[1]}));const e=o,r=l(()=>e[5]+e[4]+e[3]+e[2]+e[1]),a=l(()=>({5:(e[5]/r.value*100).toFixed(0)+"%",4:(e[4]/r.value*100).toFixed(0)+"%",3:(e[3]/r.value*100).toFixed(0)+"%",2:(e[2]/r.value*100).toFixed(0)+"%",1:(e[1]/r.value*100).toFixed(0)+"%"}));return(c,u)=>(p(),w("div",U,[(p(),w(k,null,I(5,s=>n("div",{class:"rating-row",key:6-s},[n("div",A,[P(m(6-s)+" ",1),v(t(q))]),n("div",{class:y(["line",`line-${6-s}`])},null,2),n("div",E,m(e[6-s]),1)])),64))]))}}),Y=g(Q,[["__scopeId","data-v-58108141"]]),j=o=>(R("data-v-fcc7c2c8"),o=o(),$(),o),G={class:"review-stats"},J={class:"left"},K={class:"reviews-count h2"},W={class:"recomendation-part text-s"},X=j(()=>n("div",{class:"recomendation-text text-s"},"Customers recommended this product",-1)),Z=f({__name:"ProductReviewStats",props:{rating:{},reviews:{}},setup(o){const e=o,r=l(()=>e.reviews.length),a=l(()=>{const s={5:0,4:0,3:0,2:0,1:0};for(const _ of e.reviews)s[_.rating]++;return s}),c=l(()=>a.value[4]+a.value[5]),u=l(()=>Math.floor(c.value/r.value*100));return(s,_)=>(p(),w("div",G,[n("div",J,[n("div",K,m(t(r))+" reviews",1),v(x,{class:"stars",rating:s.rating},null,8,["rating"]),n("div",W,m(t(c))+" out of "+m(t(r))+" ("+m(t(u))+"%) ",1),X]),v(Y,S({class:"right"},t(a)),null,16)]))}}),ee=g(Z,[["__scopeId","data-v-fcc7c2c8"]]),te=o=>(R("data-v-be48492a"),o=o(),$(),o),se={class:"review-section-header"},oe={class:"review-toolbar"},re={class:"review-sort"},ae=te(()=>n("span",{class:"text-b"},"Sort by",-1)),ne=f({__name:"ProductReviewsSectionHeader",props:F({productId:{},rating:{},reviews:{},sortOptions:{}},{selectedSort:{required:!0}}),emits:["update:selectedSort"],setup(o){const e=o,r=V(o,"selectedSort");function a(){D().showPopup("LeaveReview",{},{productId:e.productId})}return(c,u)=>{const s=C("Btn"),_=C("Select");return p(),w("header",se,[v(ee,{class:"review-stats",rating:c.rating,reviews:c.reviews},null,8,["rating","reviews"]),n("div",oe,[v(s,{class:"leave-review",onClick:a},{default:B(()=>[P("Leave a review")]),_:1}),n("div",re,[ae,v(_,{class:"review-sort-select",modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=i=>r.value=i),options:c.sortOptions},null,8,["modelValue","options"])])])])}}}),ce=g(ne,[["__scopeId","data-v-be48492a"]]),ie={key:0,class:"product-review-page"},de={class:"right"},le={class:"left"},ue={class:"reviews"},ve=f({__name:"reviews",props:{id:{}},setup(o){const e=o,r=M();r.currentProductId=e.id;const a=l(()=>r.currentProductReviews),c=l(()=>r.findProduct(e.id)),u={none:void 0,newest:(i,d)=>new Date(d.date).getTime()-new Date(i.date).getTime(),oldest:(i,d)=>new Date(i.date).getTime()-new Date(d.date).getTime(),likes:(i,d)=>d.likes-i.likes,dislikes:(i,d)=>d.dislikes-i.dislikes},s=T(u.none),_=l(()=>typeof s.value!="function"?a.value:a.value.toSorted(s.value));return(i,d)=>t(c)?(p(),w("div",ie,[n("div",de,[v(z,S({class:"product-card"},t(c)),null,16)]),n("div",le,[v(ce,{class:"reviews-header",productId:t(c).id,rating:t(c).rating,reviews:t(a),selectedSort:t(s),"onUpdate:selectedSort":d[0]||(d[0]=h=>L(s)?s.value=h:null),sortOptions:u},null,8,["productId","rating","reviews","selectedSort"]),n("div",ue,[(p(!0),w(k,null,I(t(_),h=>(p(),O(H,S({class:"review",key:h.id},h),null,16))),128))])])])):N("",!0)}}),ke=g(ve,[["__scopeId","data-v-9af70ec9"]]);export{ke as default};
